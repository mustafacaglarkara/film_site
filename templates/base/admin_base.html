{% load static %}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
  <!-- [Head] start -->
  <head>
    <title>Sample Page | Able Pro Dashboard Template</title>
    <!-- prettier-ignore -->
    {% include "partials/admin/meta.html" %}
    <!-- prettier-ignore -->
    {% include "partials/admin/styles.html" %}
    {% block styles %}
    {% endblock styles %}
  </head>
  <!-- [Head] end -->
  <!-- [Body] Start -->

  <body
    data-pc-preset="preset-1"
    data-pc-sidebar-caption="true"
    data-pc-direction="ltr"
    data-pc-theme_contrast=""
    data-pc-theme="light"
  >
    <!-- prettier-ignore -->
    {% include "partials/admin/pre_loader.html" %}
    <!-- prettier-ignore -->
    {% include "partials/admin/sidebar.html" %}
    <!-- [ Header Topbar ] start -->
    <!-- prettier-ignore -->
    {% include "partials/admin/header.html" %}
    <!-- prettier-ignore -->
    {% include "partials/admin/pc-announcement.html" %}
    <!-- [ Header ] end -->
    <!-- [ Main Content ] start -->
    <div class="pc-container">
      <div class="pc-content">
        <!-- prettier-ignore -->
        {% include "components/admin/breadcrumb.html" %}
        <!-- [ Main Content ] start -->
        <div class="row">
          {% block content %}
          {% endblock content %}
        </div>
        <!-- [ Main Content ] end -->
      </div>
    </div>
    <!-- [ Main Content ] end -->
    {% include "partials/admin/footer.html" %}
    {% include "partials/admin/settings_panel.html" %}
    <!-- Required Js -->
    {% include "partials/admin/scripts.html" %}
    {% block scripts %}
    {% endblock scripts %}
    
    <!-- Dil değiştirme işlevselliği için JavaScript kodu -->
    <script>
      // Sayfa yüklendiğinde çalışacak kod
      document.addEventListener('DOMContentLoaded', function() {
        // URL ve çerez arasında tutarsızlık varsa doğru URL'ye yönlendir
        var currentLangCookie = getCookie('django_language');
        var currentPath = window.location.pathname;
        
        // Çerez ve URL tutarsız mı?
        if (currentLangCookie === 'tr' && currentPath.indexOf('/en/') === 0) {
          // Tr çerezi varsa ama URL /en/ ile başlıyorsa, /tr/ yönlendir
          window.location.href = currentPath.replace('/en/', '/tr/');
        } else if (currentLangCookie === 'en' && currentPath.indexOf('/tr/') === 0) {
          // En çerezi varsa ama URL /tr/ ile başlıyorsa, /en/ yönlendir
          window.location.href = currentPath.replace('/tr/', '/en/');
        }
      });
      
      // Çerez değerini okuma
      function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
          var cookies = document.cookie.split(';');
          for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
            }
          }
        }
        return cookieValue;
      }
    </script>
  </body>
  <!-- [Body] end -->
</html>
